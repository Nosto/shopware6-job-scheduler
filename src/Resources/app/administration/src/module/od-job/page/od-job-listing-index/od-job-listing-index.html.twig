<od-entity-listing
        v-if="jobItems"
        :items="jobItems"
        :repository="jobRepository"
        :is-loading="isLoading"
        :showSelection="true"
        :allowColumnEdit="false"
        :allowDelete="true"
        :allowEdit="false"
        :autoLoadIsActive="autoLoadIsActive"
        :autoReloadInterval="autoReloadInterval"
        :jobTypes="jobTypes"
        :isGroupedView="isGroupedView"
        @page-change="pageChange"
        :columns="columns">
    <template #column-status="{ item }">
        {% block od_job_list_grid_job_status_link %}
            <template>
                <od-job-status-badge :status="item.status"></od-job-status-badge>
                {{ $tc('job-listing.page.listing.grid.job-status.' + item.status) }}
            </template>
        {% endblock %}
    </template>
    <template #column-name="{ item }">
        {% block od_job_list_grid_job_name_link %}
            <router-link :to="{ name: 'od.job.listing.detail', params: getLinkParams(item) }">
                {{ item.name }}
            </router-link>
        {% endblock %}
    </template>
    <template #column-startedAt="{ item }">
        {% block od_job_list_grid_job_started_date %}
            {{ item.startedAt|date() }}
        {% endblock %}
    </template>
    <template #column-finishedAt="{ item }">
        {% block od_job_list_grid_job_finished_date %}
            {{ item.finishedAt|date() }}
        {% endblock %}
    </template>
    <template #column-createdAt="{ item }">
        {% block od_job_list_grid_job_created_date %}
            {{ item.createdAt|date() }}
        {% endblock %}
    </template>
    <template #column-subJobs="{ item }">
        {% block od_job_list_grid_job_sub_jobs %}
            <div class="sub-jobs-counters-container jobs-info-counter">
                <div class="count-container" v-if="item.subJobs">
                <span class="info-container">
                    <span class="count" v-html="getChildrenCount(item, 'succeed')"></span>
                </span>
                    <od-job-status-badge status="succeed"></od-job-status-badge>
                </div>

                <div class="count-container" v-if="item.subJobs">
                    <span class="warning-container">
                        <span class="count" v-html="getChildrenCount(item, 'pending')"></span>
                    </span>
                    <od-job-status-badge status="pending"></od-job-status-badge>
                </div>

                <div class="count-container" v-if="item.subJobs">
                <span class="error-counter">
                    <span class="count" v-html="getChildrenCount(item, 'error')"></span>
                </span>
                    <od-job-status-badge status="error"></od-job-status-badge>
                </div>
            </div>
        {% endblock %}
    </template>
    <template #column-messages="{ item }">
        {% block od_job_list_grid_job_messages %}
            <div class="message-counters-container jobs-info-counter">
                <div class="count-container" v-if="item.messages">
                <span class="info-counter">
                    <span class="count" v-html="getMessagesCount(item, 'info')"></span>
                </span>
                    <sw-icon :small="true" name="default-badge-info" color="#3498db"></sw-icon>
                </div>

                <div class="count-container" v-if="item.messages">
                    <span class="warning-counter">
                        <span class="count" v-html="getMessagesCount(item, 'warning')"></span>
                    </span>
                    <sw-icon :small="true" name="default-badge-warning" color="#f39c12"></sw-icon>
                </div>

                <div class="count-container" v-if="item.messages">
                <span class="error-counter">
                    <span class="count" v-html="getMessagesCount(item, 'error')"></span>
                </span>
                    <sw-icon :small="true" name="default-badge-error" color="#c0392b"></sw-icon>
                </div>
            </div>
        {% endblock %}
    </template>
    <template #actions="{ item }">
        <sw-context-menu-item :router-link="{ name: 'od.job.listing.detail', params: getLinkParams(item) }">
            {{ $tc('job-listing.actions.view-job.button.label') }}
        </sw-context-menu-item>
        <sw-context-menu-item :disabled="!canReschedule(item)"
                              @click="rescheduleJob(item.id)">
            {{ $tc('job-listing.actions.reschedule-job.button.label') }}
        </sw-context-menu-item>
        <sw-context-menu-item class="sw-context-menu-item--danger"
                              :disabled="!canDelete(item)"
                              @click="onDeleteJob(item.id)">
            {{ $tc('job-listing.actions.delete-job.button.label') }}
        </sw-context-menu-item>
    </template>
</od-entity-listing>
